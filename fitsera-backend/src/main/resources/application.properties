server.port=8080
server.address=0.0.0.0

# ====================================
# SUPABASE POSTGRESQL DATABASE CONFIG
# ====================================
# TODO: Replace these with your actual Supabase credentials
# Get connection string from: Supabase Dashboard > Settings > Database > Connection String (URI)

spring.datasource.url=jdbc:postgresql://db.xxcfatvbpnsfqrzsxsds.supabase.co:5432/postgres
spring.datasource.username=postgres
spring.datasource.password=W384Sc3nJ*#fK#L
spring.datasource.driver-class-name=org.postgresql.Driver

# Example (replace with YOUR actual values):
# spring.datasource.url=jdbc:postgresql://db.abcdefghijk.supabase.co:5432/postgres
# spring.datasource.password=MyS3cur3P@ssw0rd

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# NOTE: Changed from 'validate' to 'update' to auto-create media_assets table
# This is safe because Hibernate will only ADD missing tables/columns, not delete existing ones

# Disable SQL initialization - tables already exist in Supabase
spring.sql.init.mode=never
spring.sql.init.continue-on-error=false

# Disable H2 Console (not needed for Supabase)
spring.h2.console.enabled=false

# File Upload Configuration (for Base64 images in JSON)
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
server.tomcat.max-http-post-size=52428800
server.tomcat.max-swallow-size=52428800
spring.jackson.parser.allow-unquoted-control-chars=true


# Supabase Storage Configuration
# TODO: Replace with your actual Supabase credentials from Dashboard → Settings → API
# 1. Go to: https://supabase.com/dashboard → Your Project → Settings → API
# 2. Copy "Project URL" (e.g., https://xxcfatvbpnsfqrzsxsds.supabase.co)
# 3. Copy "anon public" key (for normal operations) OR "service_role" key (for admin operations)
# 
# Your project URL is: https://xxcfatvbpnsfqrzsxsds.supabase.co (from your datasource URL above)
supabase.url=https://xxcfatvbpnsfqrzsxsds.supabase.co
supabase.key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4Y2ZhdHZicG5zZnFyenN4c2RzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTYzMjgwMiwiZXhwIjoyMDc3MjA4ODAyfQ.OdKP82skV6veIC5NKxAjboGmNP00nuiN1ohgMQnyuHM
supabase.storage.bucket=product-images

# OpenAI Configuration (Optional - chatbot will use rule-based responses if not set)
# Get your API key from: https://platform.openai.com/api-keys
openai.api.key=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